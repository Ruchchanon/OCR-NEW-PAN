{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\false\\\\Desktop\\\\OCR-FullProject\\\\client\\\\src\\\\pages\\\\user\\\\UserSide.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport CardDatas from '../../components/UserComponent/Card/CardDatas';\nimport NewCardDatas from '../../components/UserComponent/Card/NewCardDatas';\nimport CardPost from '../../components/UserComponent/Card/CardPost';\nimport Cards from '../../components/UserComponent/Card/Cards';\nimport SearchBox from '../../components/UserComponent/SearchBox/SearchBox';\nimport './userside.css';\nimport ReactPaginate from 'react-paginate';\nimport { AiOutlineInsertRowBelow, AiOutlineBlock } from 'react-icons/ai';\nimport { MdOutlineTableRows } from 'react-icons/md';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { registerLocale, setDefaultLocale } from \"react-datepicker\";\nimport th from 'date-fns/locale/th';\nimport { getPerson } from '../../functions/person';\nimport { toast } from 'react-toastify';\nimport { Table, Avatar, Image, Switch } from 'antd';\nimport { DeleteOutlined, VerifiedOutlined } from '@ant-design/icons';\nimport { AiOutlineVerticalAlignBottom } from \"react-icons/ai\";\nimport { removePerson } from '../../functions/person';\nimport DownloadLink from \"react-download-link\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction UserSide() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [selectedCard, setSelectedCard] = useState(null);\n  const [searchText, setSearchText] = useState('');\n  const [searchNo, setSearchNo] = useState('');\n  const [startDate, setStartDate] = useState(new Date());\n  const [person, setPerson] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  useEffect(() => {\n    loadPerson(user.token);\n  }, []);\n\n  const loadPerson = authtoken => {\n    getPerson(authtoken).then(res => {\n      setPerson(res.data);\n      console.log(res.data);\n    }).catch(err => {\n      toast.error(err);\n      console.log(err);\n    });\n  };\n\n  registerLocale('th', th);\n\n  function Greeting(props) {\n    const isLoggedIn = props.onChangeSwitch;\n\n    if (isLoggedIn) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(PaginatedItems, {\n          itemsPerPage: 12\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 27\n        }, this), cardPost]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 22\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: person,\n        rowKey: \"_id\",\n        className: \"upload-table\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 18\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this);\n  }\n\n  const handleRemove = id => {\n    if (window.confirm(\"คุณแน่ใจว่าจะลบไฟล์!\")) {\n      setLoading(true);\n      removePerson(id, user.token).then(res => {\n        loadPerson(user.token);\n        setLoading(false);\n        toast.success('ลบไฟล์ ' + res.data.name + ' สำเร็จ ');\n      }).catch(err => {\n        setLoading(false);\n        toast.error(err.response);\n      });\n    }\n  };\n\n  function onChangeSwitch(checked) {\n    console.log(`switch to ${checked}`);\n  }\n\n  function onCardOpenClick(theCard) {\n    setSelectedCard(theCard);\n  }\n\n  function onCardCloseClick() {\n    setSelectedCard(null);\n  }\n\n  const filteredCards = person.filter(CardData => CardData.name.includes(searchText)).filter(CardData => CardData.locate.includes(searchNo));\n  const cardElements = filteredCards.map((CardData, index) => {\n    return /*#__PURE__*/_jsxDEV(Cards, {\n      CardData: CardData,\n      onCardClick: onCardOpenClick\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 14\n    }, this);\n  });\n\n  function Items(_ref) {\n    let {\n      currentItems\n    } = _ref;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: currentItems && currentItems.map(cardElements => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: cardElements\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 13\n      }, this))\n    }, void 0, false);\n  }\n\n  function PaginatedItems(_ref2) {\n    _s();\n\n    let {\n      itemsPerPage\n    } = _ref2;\n    // We start with an empty list of items.\n    const [currentItems, setCurrentItems] = useState(null);\n    const [pageCount, setPageCount] = useState(0); // Here we use item offsets; we could also use page offsets\n    // following the API or data you're working with.\n\n    const [itemOffset, setItemOffset] = useState(0);\n    useEffect(() => {\n      // Fetch items from another resources.\n      const endOffset = itemOffset + itemsPerPage;\n      console.log(`Loading items from ${itemOffset} to ${endOffset}`);\n      setCurrentItems(cardElements.slice(itemOffset, endOffset));\n      setPageCount(Math.ceil(cardElements.length / itemsPerPage));\n    }, [itemOffset, itemsPerPage]); // Invoke when user click to request another page.\n\n    const handlePageClick = event => {\n      const newOffset = event.selected * itemsPerPage % cardElements.length;\n      console.log(`User requested page number ${event.selected}, which is offset ${newOffset}`);\n      setItemOffset(newOffset);\n    };\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"app-grid\",\n        children: [/*#__PURE__*/_jsxDEV(Items, {\n          currentItems: currentItems\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(ReactPaginate, {\n          breakLabel: \"...\",\n          nextLabel: \"Next\",\n          onPageChange: handlePageClick,\n          pageRangeDisplayed: 5,\n          pageCount: pageCount,\n          previousLabel: \"Previous\",\n          renderOnZeroPageCount: null,\n          containerClassName: \"paginationBttns\",\n          previousClassName: \"previousBttn\",\n          nextLinkClassName: \"nextBttn\",\n          disabledClassName: \"paginationDisabled\",\n          activeClassName: \"paginationActive\",\n          pageRangeDisplayed: 2,\n          marginPagesDisplayed: 2\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n  _s(PaginatedItems, \"HTeX8cSP+G2jiDQZoJcFFLxPhRM=\");\n\n  const columns = [{\n    title: 'วันที่',\n    dataIndex: 'dateFirst',\n    key: 'dateFirst'\n  }, {\n    title: 'เลขรับ',\n    dataIndex: 'numTo',\n    key: 'numTo'\n  }, {\n    title: 'ที่',\n    dataIndex: 'locate',\n    key: 'locate'\n  }, {\n    title: 'ลงวันที่',\n    dataIndex: 'dateGen',\n    key: 'dateGen'\n  }, {\n    title: 'จาก',\n    dataIndex: 'from',\n    key: 'from'\n  }, {\n    title: 'ถึง',\n    dataIndex: 'to',\n    key: 'to'\n  }, {\n    title: 'Download',\n    render: record => /*#__PURE__*/_jsxDEV(DownloadLink, {\n      className: \"button-field-download\",\n      filename: record.pic,\n      label: \"Download\",\n      children: [/*#__PURE__*/_jsxDEV(AiOutlineVerticalAlignBottom, {\n        className: \"button-icon-download\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-text-download\",\n        children: \"\\u0E14\\u0E32\\u0E27\\u0E19\\u0E4C\\u0E42\\u0E2B\\u0E25\\u0E14\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 13\n    }, this)\n  }, {\n    title: 'เรื่อง',\n    dataIndex: 'name',\n    key: 'name'\n  }, {\n    title: 'ไฟล์',\n    render: record => /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `http://localhost:5000/uploads/${record.pic}`,\n        target: \"_blank\",\n        children: /*#__PURE__*/_jsxDEV(Image, {\n          src: `http://localhost:5000/uploads/${record.pic}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }, this)\n    }, void 0, false)\n  }];\n  let cardPost = null;\n\n  if (!!selectedCard) {\n    cardPost = /*#__PURE__*/_jsxDEV(CardPost, {\n      CardData: selectedCard,\n      onBgClick: onCardCloseClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 16\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"searh\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search2\",\n        children: [\"\\u0E43\\u0E2A\\u0E48\\u0E04\\u0E33\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\", /*#__PURE__*/_jsxDEV(SearchBox, {\n          value: searchText,\n          onValueChange: setSearchText,\n          placeholder: \"\\u0E04\\u0E33\\u0E04\\u0E49\\u0E19\\u0E2B\\u0E32\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 44\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search3\",\n        children: [\"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E2B\\u0E19\\u0E31\\u0E07\\u0E2A\\u0E37\\u0E2D\", /*#__PURE__*/_jsxDEV(SearchBox, {\n          value: searchNo,\n          onValueChange: setSearchNo,\n          placeholder: \"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E2B\\u0E19\\u0E31\\u0E07\\u0E2A\\u0E37\\u0E2D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 47\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search4\",\n        children: /*#__PURE__*/_jsxDEV(DatePicker, {\n          elected: startDate,\n          onChange: date => setStartDate(date),\n          locale: \"th\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chblog\",\n        children: /*#__PURE__*/_jsxDEV(Switch, {\n          defaultChecked: true,\n          onChange: onChangeSwitch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 33\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Greeting, {\n      children: [\"isLoggedIn=\", onChangeSwitch]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 238,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(UserSide, \"RYGNWkr6+D6GV6/vP/cIgtGV3II=\", false, function () {\n  return [useSelector];\n});\n\n_c = UserSide;\nexport default UserSide;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserSide\");","map":{"version":3,"sources":["C:/Users/false/Desktop/OCR-FullProject/client/src/pages/user/UserSide.js"],"names":["React","useEffect","useState","useSelector","CardDatas","NewCardDatas","CardPost","Cards","SearchBox","ReactPaginate","AiOutlineInsertRowBelow","AiOutlineBlock","MdOutlineTableRows","DatePicker","registerLocale","setDefaultLocale","th","getPerson","toast","Table","Avatar","Image","Switch","DeleteOutlined","VerifiedOutlined","AiOutlineVerticalAlignBottom","removePerson","DownloadLink","UserSide","selectedCard","setSelectedCard","searchText","setSearchText","searchNo","setSearchNo","startDate","setStartDate","Date","person","setPerson","loading","setLoading","user","state","loadPerson","token","authtoken","then","res","data","console","log","catch","err","error","Greeting","props","isLoggedIn","onChangeSwitch","cardPost","columns","handleRemove","id","window","confirm","success","name","response","checked","onCardOpenClick","theCard","onCardCloseClick","filteredCards","filter","CardData","includes","locate","cardElements","map","index","Items","currentItems","PaginatedItems","itemsPerPage","setCurrentItems","pageCount","setPageCount","itemOffset","setItemOffset","endOffset","slice","Math","ceil","length","handlePageClick","event","newOffset","selected","title","dataIndex","key","render","record","pic","date"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport CardDatas from '../../components/UserComponent/Card/CardDatas'\r\nimport NewCardDatas from '../../components/UserComponent/Card/NewCardDatas';\r\nimport CardPost from '../../components/UserComponent/Card/CardPost';\r\nimport Cards from '../../components/UserComponent/Card/Cards';\r\nimport SearchBox from '../../components/UserComponent/SearchBox/SearchBox';\r\nimport './userside.css';\r\nimport ReactPaginate from 'react-paginate';\r\nimport { AiOutlineInsertRowBelow, AiOutlineBlock } from 'react-icons/ai';\r\nimport { MdOutlineTableRows } from 'react-icons/md';\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport { registerLocale, setDefaultLocale } from  \"react-datepicker\";\r\nimport th from 'date-fns/locale/th';\r\n\r\nimport { getPerson } from '../../functions/person';\r\nimport { toast } from 'react-toastify';\r\nimport { Table, Avatar, Image, Switch } from 'antd';\r\nimport { DeleteOutlined, VerifiedOutlined } from '@ant-design/icons';\r\nimport { AiOutlineVerticalAlignBottom} from \"react-icons/ai\";\r\nimport { removePerson } from '../../functions/person';\r\nimport DownloadLink from \"react-download-link\";\r\n\r\n\r\nfunction UserSide() {\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [searchText, setSearchText] = useState('');\r\n  const [searchNo, setSearchNo] = useState('');\r\n\r\n  const [startDate, setStartDate] = useState(new Date());\r\n  \r\n  const [person, setPerson] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const { user } = useSelector((state) => ({ ...state }))\r\n  useEffect(() => {\r\n    loadPerson(user.token);\r\n  }, [])\r\n\r\n  const loadPerson = (authtoken) => {\r\n    getPerson(authtoken)\r\n        .then((res) => {\r\n            setPerson(res.data)\r\n            console.log(res.data)\r\n        }).catch((err) => {\r\n            toast.error(err)\r\n            console.log(err)\r\n        })\r\n}\r\n\r\n\r\n\r\n \r\n\r\n\r\n  registerLocale('th', th)\r\n\r\n  function Greeting(props) {\r\n    const isLoggedIn = props.onChangeSwitch;\r\n    if (isLoggedIn) {\r\n      return         <div><PaginatedItems itemsPerPage={12} />\r\n      {cardPost}</div>;\r\n    }\r\n    return  <div><Table columns={columns} dataSource={person} rowKey=\"_id\" className=\"upload-table\"/></div>;\r\n  }\r\n\r\n  const handleRemove = (id) => {\r\n    if (window.confirm(\"คุณแน่ใจว่าจะลบไฟล์!\")){\r\n        setLoading(true);\r\n        removePerson(id, user.token)\r\n            .then(res=>{\r\n                loadPerson(user.token);\r\n                setLoading(false)\r\n                toast.success('ลบไฟล์ '+ res.data.name + ' สำเร็จ ')\r\n            }).catch(err=>{\r\n                setLoading(false)\r\n                toast.error(err.response)\r\n            })\r\n    }\r\n}\r\nfunction onChangeSwitch(checked) {\r\n  console.log(`switch to ${checked}`);\r\n}\r\n\r\n  function onCardOpenClick(theCard){\r\n    setSelectedCard(theCard);\r\n  }\r\n\r\n  function onCardCloseClick(){\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  const filteredCards = person.filter((CardData) => CardData.name.includes(searchText)).filter((CardData) => CardData.locate.includes(searchNo))\r\n\r\n  const cardElements = filteredCards.map((CardData, index) => {\r\n      return <Cards key={index} CardData={CardData} onCardClick={onCardOpenClick}/>;\r\n  });\r\n\r\n  function Items({ currentItems }) {\r\n    return (\r\n      <>\r\n        {currentItems &&\r\n          currentItems.map((cardElements) => (\r\n            <div>\r\n              {cardElements}\r\n            </div>\r\n          ))}\r\n      </>\r\n    );\r\n  }\r\n\r\n  function PaginatedItems({ itemsPerPage }) {\r\n    // We start with an empty list of items.\r\n    const [currentItems, setCurrentItems] = useState(null);\r\n    const [pageCount, setPageCount] = useState(0);\r\n    // Here we use item offsets; we could also use page offsets\r\n    // following the API or data you're working with.\r\n    const [itemOffset, setItemOffset] = useState(0);\r\n  \r\n    useEffect(() => {\r\n \r\n  \r\n      // Fetch items from another resources.\r\n      const endOffset = itemOffset + itemsPerPage;\r\n      console.log(`Loading items from ${itemOffset} to ${endOffset}`);\r\n      setCurrentItems(cardElements.slice(itemOffset, endOffset));\r\n      setPageCount(Math.ceil(cardElements.length / itemsPerPage));\r\n    }, [itemOffset, itemsPerPage]);\r\n  \r\n    // Invoke when user click to request another page.\r\n    const handlePageClick = (event) => {\r\n      const newOffset = (event.selected * itemsPerPage) % cardElements.length;\r\n      console.log(\r\n        `User requested page number ${event.selected}, which is offset ${newOffset}`\r\n      );\r\n      setItemOffset(newOffset);\r\n    };\r\n\r\n  \r\n    return (\r\n      <><div className=\"app-grid\">\r\n        <Items currentItems={currentItems} />\r\n        <ReactPaginate\r\n          breakLabel=\"...\"\r\n          nextLabel=\"Next\"\r\n          onPageChange={handlePageClick}\r\n          pageRangeDisplayed={5}\r\n          pageCount={pageCount}\r\n          previousLabel=\"Previous\"\r\n          renderOnZeroPageCount={null}\r\n          containerClassName={\"paginationBttns\"}\r\n          previousClassName={\"previousBttn\"}\r\n          nextLinkClassName={\"nextBttn\"}\r\n          disabledClassName={\"paginationDisabled\"}\r\n          activeClassName={\"paginationActive\"}\r\n          pageRangeDisplayed={2}\r\n          marginPagesDisplayed={2}\r\n        />\r\n        </div>\r\n\r\n      </>\r\n    );\r\n  }\r\n\r\n  const columns = [\r\n\r\n    {\r\n        title: 'วันที่',\r\n        dataIndex: 'dateFirst',\r\n        key: 'dateFirst'\r\n    },\r\n    {\r\n        title: 'เลขรับ',\r\n        dataIndex: 'numTo',\r\n        key: 'numTo'\r\n    },\r\n    {\r\n        title: 'ที่',\r\n        dataIndex: 'locate',\r\n        key: 'locate'\r\n    },\r\n    {\r\n        title: 'ลงวันที่',\r\n        dataIndex: 'dateGen',\r\n        key: 'dateGen'\r\n    },\r\n    {\r\n        title: 'จาก',\r\n        dataIndex: 'from',\r\n        key: 'from'\r\n    },\r\n    {\r\n        title: 'ถึง',\r\n        dataIndex: 'to',\r\n        key: 'to'\r\n    },\r\n    {\r\n        title: 'Download',\r\n        render: (record) => (\r\n            <DownloadLink className=\"button-field-download\"  filename={record.pic} label=\"Download\" >\r\n               \r\n                <AiOutlineVerticalAlignBottom className=\"button-icon-download\"/>          \r\n                <div className=\"button-text-download\">\r\n                ดาวน์โหลด</div>\r\n            </DownloadLink>\r\n        )\r\n    },\r\n    {\r\n        title: 'เรื่อง',\r\n        dataIndex: 'name',\r\n        key: 'name'\r\n    },\r\n    {\r\n        title: 'ไฟล์',\r\n        render: (record) => (\r\n            <>\r\n            \r\n                <a href={`http://localhost:5000/uploads/${record.pic}`} target=\"_blank\" >\r\n                <Image src={`http://localhost:5000/uploads/${record.pic}`} />  \r\n                </a>\r\n            </>\r\n        )\r\n    }\r\n\r\n]\r\n  \r\n\r\n\r\n   \r\n  \r\n\r\n  let cardPost = null;\r\n  if(!!selectedCard){\r\n    cardPost = <CardPost CardData={selectedCard} onBgClick={onCardCloseClick}/>\r\n  }\r\n\r\n  return (\r\n    <div >\r\n      <div className=\"searh\">\r\n        <div className=\"search2\">ใส่คำค้นหา<SearchBox value={searchText} onValueChange={setSearchText} placeholder=\"คำค้นหา\"/></div>\r\n        <div className=\"search3\">เลขที่หนังสือ<SearchBox value={searchNo} onValueChange={setSearchNo} placeholder=\"เลขที่หนังสือ\"/></div>\r\n        <div className=\"search4\"><DatePicker elected={startDate} onChange={(date) => setStartDate(date)} locale=\"th\" /></div>\r\n        <div className=\"chblog\"><Switch defaultChecked onChange={onChangeSwitch} /></div>\r\n      </div> \r\n        <Greeting>isLoggedIn={onChangeSwitch}</Greeting>\r\n    </div>\r\n    \r\n  )\r\n}\r\n\r\nexport default UserSide\r\n"]},"metadata":{},"sourceType":"module"}