{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\false\\\\Desktop\\\\OCR-FullProject\\\\client\\\\src\\\\pages\\\\upload\\\\Upload.js\";\nimport React, { Component } from 'react';\nimport FileBase64 from 'react-file-base64';\nimport { Button, Form, FormGroup, Label, FormText, Input } from \"reactstrap\";\nimport \"./upload.css\";\nimport ocr from \"./ConnectS3.py\"; //import { convertPdfToPng } from 'convert-pdf-png';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Upload extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      confirmation: \"\",\n      isLoading: \"\",\n      files: \"\",\n      Subject: \"\",\n      //ชื่อเรื่องเอกสาร\n      Num: \"\",\n      //เลขเอกสาร\n      Date: \"\",\n      //วันที่\n      ffrom: \"\",\n      //จาก\n      to: \"\",\n      //ถึง\n      Vendor: \"\",\n      Description: \"\"\n    };\n    this.handleChane = this.handleChane.bind(this);\n  }\n\n  handleChane(event) {\n    event.preventDefault();\n    const target = event.target;\n    const value = target.value;\n    const name = target.name;\n    this.setState({\n      name: value\n    });\n  }\n\n  async handleSubmit(event) {\n    event.preventDefaulr();\n    this.setState({\n      confirmation: \"Uploading...\"\n    });\n  }\n\n  async getFiles(files) {\n    this.setState({\n      isLoading: \"Extracting data\",\n      files: files\n    });\n    const UID = Math.round(1 + Math.random() * (1000000 - 1));\n    var date = {\n      fileExt: \"png\",\n      imageID: UID,\n      folder: UID,\n      img: this.state.files[0].base64\n    };\n    this.setState({\n      confirmation: \"Processing...\"\n    });\n    await fetch('https://k46tk0kz6j.execute-api.ap-southeast-1.amazonaws.com/Production', {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application.json\"\n      },\n      body: JSON.stringify(date)\n    });\n    let targetImage = UID + \".png\";\n    const response = await fetch('http://localhost:8989/lambda_handler/<event>', {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application.json\"\n      },\n      body: JSON.stringify(targetImage)\n    });\n    this.setState({\n      confirmation: \"\"\n    });\n    const OCRBody = await response.json();\n    console.log(\"OCRBody\", OCRBody);\n    this.setState({\n      Num: OCRBody.body[0]\n    });\n    this.setState({\n      Subject: OCRBody.body[1]\n    });\n    this.setState({\n      Date: OCRBody.body[2]\n    });\n    this.setState({\n      ffrom: OCRBody.body[3]\n    });\n    this.setState({\n      to: OCRBody.body[4]\n    });\n  }\n\n  render() {\n    const processing = this.state.confirmation;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-6 offset-3\",\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-danger\",\n              children: processing\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n              children: \"Upload File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(FormText, {\n              color: \"muted\",\n              children: \"PNG,JPG\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 28\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group files color\",\n              children: /*#__PURE__*/_jsxDEV(FileBase64, {\n                multiple: true,\n                onDone: this.getFiles.bind(this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"\\u0E40\\u0E25\\u0E02\\u0E17\\u0E35\\u0E48\\u0E2B\\u0E19\\u0E31\\u0E07\\u0E2A\\u0E37\\u0E2D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              name: \"Num\",\n              id: \"Num\",\n              required: true,\n              defaultValue: this.state.Num,\n              onChange: this.handleChane\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E23\\u0E37\\u0E48\\u0E2D\\u0E07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              name: \"Subject\",\n              id: \"Subject\",\n              required: true,\n              defaultValue: this.state.Subject,\n              onChange: this.handleChane\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"\\u0E27\\u0E31\\u0E19\\u0E17\\u0E35\\u0E48\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              name: \"Date\",\n              id: \"Date\",\n              required: true,\n              defaultValue: this.state.Date,\n              onChange: this.handleChane\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"\\u0E1C\\u0E39\\u0E49\\u0E2A\\u0E48\\u0E07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              name: \"ffrom\",\n              id: \"ffrom\",\n              required: true,\n              defaultValue: this.state.ffrom,\n              onChange: this.handleChane\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                children: \"\\u0E16\\u0E36\\u0E07\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"text\",\n              name: \"to\",\n              id: \"to\",\n              required: true,\n              defaultValue: this.state.to,\n              onChange: this.handleChane\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 201,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            className: \"btn btn-lg btn-block  btn-success\",\n            children: \"\\u0E22\\u0E37\\u0E19\\u0E22\\u0E31\\u0E19\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 16\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nexport default Upload;","map":{"version":3,"sources":["C:/Users/false/Desktop/OCR-FullProject/client/src/pages/upload/Upload.js"],"names":["React","Component","FileBase64","Button","Form","FormGroup","Label","FormText","Input","ocr","Upload","constructor","props","state","confirmation","isLoading","files","Subject","Num","Date","ffrom","to","Vendor","Description","handleChane","bind","event","preventDefault","target","value","name","setState","handleSubmit","preventDefaulr","getFiles","UID","Math","round","random","date","fileExt","imageID","folder","img","base64","fetch","method","headers","Accept","body","JSON","stringify","targetImage","response","OCRBody","json","console","log","render","processing"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport FileBase64 from 'react-file-base64';\r\nimport {Button,Form,FormGroup,Label,FormText,Input} from \"reactstrap\";\r\nimport \"./upload.css\";\r\nimport ocr from \"./ConnectS3.py\";\r\n//import { convertPdfToPng } from 'convert-pdf-png';\r\n\r\n\r\n\r\n\r\n\r\nclass Upload extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n    \r\n    this.state = {\r\n            confirmation : \"\",\r\n            isLoading : \"\",\r\n            files : \"\",\r\n            Subject : \"\",  //ชื่อเรื่องเอกสาร\r\n            Num : \"\",   //เลขเอกสาร\r\n            Date: \"\", //วันที่\r\n            ffrom: \"\", //จาก\r\n            to: \"\", //ถึง\r\n            Vendor : \"\",\r\n            Description : \"\"\r\n      }\r\n\r\n    this.handleChane= this.handleChane.bind(this);\r\n    \r\n    }\r\n\r\n\r\n    handleChane(event){\r\n        event.preventDefault();\r\n        const target = event.target;\r\n        const value=target.value;\r\n        const name=target.name;\r\n\r\n        this.setState({name:value});\r\n\r\n    }\r\n\r\n    async handleSubmit(event){\r\n        event.preventDefaulr();\r\n        this.setState({confirmation : \"Uploading...\"});\r\n\r\n    }\r\n\r\n    async getFiles(files){\r\n        this.setState({\r\n            isLoading : \"Extracting data\",\r\n             files : files,\r\n             \r\n             \r\n             \r\n    }\r\n    \r\n    \r\n    );\r\n\r\n\r\n    const UID= Math.round(1+ Math.random() * (1000000-1));\r\n\r\n    var date={\r\n        fileExt:\"png\",\r\n        imageID: UID,\r\n        folder:UID,\r\n        img : this.state.files[0].base64\r\n    };\r\n\r\n    this.setState({confirmation : \"Processing...\"})\r\n    await fetch(\r\n        'https://k46tk0kz6j.execute-api.ap-southeast-1.amazonaws.com/Production',\r\n        {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n        body : JSON.stringify(date)\r\n        }\r\n    );\r\n\r\n\r\n\r\n\r\n    let targetImage= UID + \".png\";\r\n    const response=await fetch(\r\n        'http://localhost:8989/lambda_handler/<event>',\r\n        {\r\n    \r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n    \r\n        body : JSON.stringify(targetImage)\r\n       \r\n        }\r\n       \r\n    );\r\n    this.setState({confirmation : \"\"})\r\n\r\n    const OCRBody = await response.json();\r\n    console.log(\"OCRBody\",OCRBody);\r\n\r\n    this.setState({Num :OCRBody.body[0] })\r\n    this.setState({Subject :OCRBody.body[1] })\r\n    this.setState({Date :OCRBody.body[2] })\r\n    this.setState({ffrom :OCRBody.body[3] })\r\n    this.setState({to :OCRBody.body[4] })\r\n\r\n\r\n    }\r\n\r\n    render() { \r\n        const processing=this.state.confirmation;\r\n        return ( \r\n           <div className=\"row\">\r\n               <div className=\"col-6 offset-3\">\r\n                    <Form onSubmit={this.handleSubmit} >\r\n                        <FormGroup>\r\n                           <h3 className=\"text-danger\">{processing}</h3>    \r\n                           <h6>Upload File</h6>\r\n                           <FormText color=\"muted\">PNG,JPG</FormText>\r\n                       \r\n                       \r\n                        <div className=\"form-group files color\">\r\n                            <FileBase64 \r\n                            multiple={true} \r\n                            onDone={this.getFiles.bind(this)}></FileBase64>\r\n\r\n                        </div>\r\n                        </FormGroup>  \r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>เลขที่หนังสือ</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Num\"\r\n                                id=\"Num\"\r\n                                required\r\n                                defaultValue={this.state.Num}\r\n                                onChange={this.handleChane}\r\n                            />\r\n\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ชื่อเรื่อง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Subject\"\r\n                                id=\"Subject\"\r\n                                required\r\n                                defaultValue={this.state.Subject}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>วันที่</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Date\"\r\n                                id=\"Date\"\r\n                                required\r\n                                defaultValue={this.state.Date}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ผู้ส่ง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"ffrom\"\r\n                                id=\"ffrom\"\r\n                                required\r\n                                defaultValue={this.state.ffrom}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ถึง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"to\"\r\n                                id=\"to\"\r\n                                required\r\n                                defaultValue={this.state.to}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n                        <Button className=\"btn btn-lg btn-block  btn-success\">\r\n                            ยืนยัน\r\n                        </Button>\r\n                    </Form>   \r\n                </div>  \r\n           </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Upload;"]},"metadata":{},"sourceType":"module"}