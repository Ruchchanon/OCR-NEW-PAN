{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\false\\\\Desktop\\\\OCR-FullProject\\\\client\\\\src\\\\components\\\\routes\\\\AdminRoute.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Route } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport LoadingToRedirect from './LoadingToRedirect';\nimport { currentAdmin } from '../../functions/auth'; //...rest คือ react hook ต้องศึกษาเพิ่มเติม\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AdminRoute = _ref => {\n  _s();\n\n  let {\n    children,\n    ...rest\n  } = _ref;\n  const {\n    user\n  } = useSelector(state => ({ ...state\n  }));\n  const [ok, setOk] = useState(false);\n  useEffect(() => {\n    if (user && user.token) {\n      currentAdmin(user.token).then(res => {\n        setOk(true);\n        console.log('Admin Route Ok', res);\n      }).catch(err => {\n        setOk(false);\n        console.log('Admin Route err', err);\n      });\n    }\n  }, [user]);\n  return ok ? /*#__PURE__*/_jsxDEV(Route, { ...rest\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 11\n  }, this) : /*#__PURE__*/_jsxDEV(LoadingToRedirect, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 11\n  }, this);\n};\n\n_s(AdminRoute, \"wBhjhzGBq1sJowQkY90HFv97Gs4=\", false, function () {\n  return [useSelector];\n});\n\n_c = AdminRoute;\nexport default AdminRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"AdminRoute\");","map":{"version":3,"sources":["C:/Users/false/Desktop/OCR-FullProject/client/src/components/routes/AdminRoute.js"],"names":["React","useState","useEffect","Route","useSelector","LoadingToRedirect","currentAdmin","AdminRoute","children","rest","user","state","ok","setOk","token","then","res","console","log","catch","err"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;AAEA,SAASC,YAAT,QAA6B,sBAA7B,C,CAGA;;;;AACA,MAAMC,UAAU,GAAG,QAA2B;AAAA;;AAAA,MAA1B;AAAEC,IAAAA,QAAF;AAAY,OAAGC;AAAf,GAA0B;AAC1C,QAAM;AAAEC,IAAAA;AAAF,MAAWN,WAAW,CAAEO,KAAD,KAAY,EAAE,GAAGA;AAAL,GAAZ,CAAD,CAA5B;AACA,QAAM,CAACC,EAAD,EAAKC,KAAL,IAAcZ,QAAQ,CAAC,KAAD,CAA5B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIQ,IAAI,IAAIA,IAAI,CAACI,KAAjB,EAAuB;AACnBR,MAAAA,YAAY,CAACI,IAAI,CAACI,KAAN,CAAZ,CACKC,IADL,CACUC,GAAG,IAAI;AACTH,QAAAA,KAAK,CAAC,IAAD,CAAL;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BF,GAA9B;AACH,OAJL,EAIOG,KAJP,CAIaC,GAAG,IAAI;AACZP,QAAAA,KAAK,CAAC,KAAD,CAAL;AACAI,QAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BE,GAA/B;AAEH,OARL;AASH;AACJ,GAZQ,EAYN,CAACV,IAAD,CAZM,CAAT;AAcA,SAAQE,EAAE,gBACJ,QAAC,KAAD,OAAYH;AAAZ;AAAA;AAAA;AAAA;AAAA,UADI,gBAEJ,QAAC,iBAAD;AAAA;AAAA;AAAA;AAAA,UAFN;AAKH,CAvBD;;GAAMF,U;UACeH,W;;;KADfG,U;AAyBN,eAAeA,UAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport LoadingToRedirect from './LoadingToRedirect';\r\n\r\nimport { currentAdmin } from '../../functions/auth';\r\n\r\n\r\n//...rest คือ react hook ต้องศึกษาเพิ่มเติม\r\nconst AdminRoute = ({ children, ...rest }) => {\r\n    const { user } = useSelector((state) => ({ ...state}));\r\n    const [ok, setOk] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (user && user.token){\r\n            currentAdmin(user.token)\r\n                .then(res => {\r\n                    setOk(true)\r\n                    console.log('Admin Route Ok', res)\r\n                }).catch(err => {\r\n                    setOk(false)\r\n                    console.log('Admin Route err', err)\r\n                    \r\n                })\r\n        }\r\n    }, [user])\r\n\r\n    return  ok\r\n        ? <Route { ...rest } />\r\n        : <LoadingToRedirect />\r\n        \r\n    \r\n}\r\n\r\nexport default AdminRoute\r\n"]},"metadata":{},"sourceType":"module"}