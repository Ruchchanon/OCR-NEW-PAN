{"ast":null,"code":"/* import React, { Component } from 'react';\r\nimport FileBase64 from 'react-file-base64';\r\nimport {Button,Form,FormGroup,Label,FormText,Input} from \"reactstrap\";\r\nimport \"./upload.css\";\r\n//import { convertPdfToPng } from 'convert-pdf-png';\r\n\r\n\r\n\r\n\r\n\r\nclass Upload extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n    \r\n    this.state = {\r\n            confirmation : \"\",\r\n            isLoading : \"\",\r\n            files : \"\",\r\n            Subject : \"\",  //ชื่อเรื่องเอกสาร\r\n            Num : \"\",   //เลขเอกสาร\r\n            Date: \"\", //วันที่\r\n            ffrom: \"\", //จาก\r\n            to: \"\", //ถึง\r\n            Vendor : \"\",\r\n            Description : \"\"\r\n      }\r\n\r\n    this.handleChane= this.handleChane.bind(this);\r\n    \r\n    }\r\n\r\n\r\n    handleChane(event){\r\n        event.preventDefault();\r\n        const target = event.target;\r\n        const value=target.value;\r\n        const name=target.name;\r\n\r\n        this.setState({name:value});\r\n\r\n    }\r\n\r\n    async handleSubmit(event){\r\n        event.preventDefaulr();\r\n        this.setState({confirmation : \"Uploading...\"});\r\n\r\n    }\r\n\r\n    async getFiles(files){\r\n        this.setState({\r\n            isLoading : \"Extracting data\",\r\n             files : files,\r\n             \r\n             \r\n             \r\n    }\r\n    \r\n    \r\n    );\r\n\r\n\r\n    const UID= Math.round(1+ Math.random() * (1000000-1));\r\n\r\n    var date={\r\n        fileExt:\"png\",\r\n        imageID: UID,\r\n        folder:UID,\r\n        img : this.state.files[0].base64\r\n    };\r\n\r\n    this.setState({confirmation : \"Processing...\"})\r\n    await fetch(\r\n        'https://k46tk0kz6j.execute-api.ap-southeast-1.amazonaws.com/Production',\r\n        {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n        body : JSON.stringify(date)\r\n        }\r\n    );\r\n\r\n\r\n\r\n\r\n    let targetImage= UID + \".png\";\r\n    const response=await fetch(\r\n        'http://localhost:8989/lambda_handler/<event>',\r\n        {\r\n    \r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n    \r\n        body : JSON.stringify(targetImage)\r\n       \r\n        }\r\n       \r\n    );\r\n    this.setState({confirmation : \"\"})\r\n\r\n    const OCRBody = await response.json();\r\n    console.log(\"OCRBody\",OCRBody);\r\n\r\n    this.setState({Num :OCRBody.body[0] })\r\n    this.setState({Subject :OCRBody.body[1] })\r\n    this.setState({Date :OCRBody.body[2] })\r\n    this.setState({ffrom :OCRBody.body[3] })\r\n    this.setState({to :OCRBody.body[4] })\r\n\r\n\r\n    }\r\n\r\n    render() { \r\n        const processing=this.state.confirmation;\r\n        return ( \r\n           <div className=\"row\">\r\n               <div className=\"col-6 offset-3\">\r\n                    <Form onSubmit={this.handleSubmit} >\r\n                        <FormGroup>\r\n                           <h3 className=\"text-danger\">{processing}</h3>    \r\n                           <h6>Upload File</h6>\r\n                           <FormText color=\"muted\">PNG,JPG</FormText>\r\n                       \r\n                       \r\n                        <div className=\"form-group files color\">\r\n                            <FileBase64 \r\n                            multiple={true} \r\n                            onDone={this.getFiles.bind(this)}></FileBase64>\r\n\r\n                        </div>\r\n                        </FormGroup>  \r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>เลขที่หนังสือ</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Num\"\r\n                                id=\"Num\"\r\n                                required\r\n                                defaultValue={this.state.Num}\r\n                                onChange={this.handleChane}\r\n                            />\r\n\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ชื่อเรื่อง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Subject\"\r\n                                id=\"Subject\"\r\n                                required\r\n                                defaultValue={this.state.Subject}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>วันที่</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Date\"\r\n                                id=\"Date\"\r\n                                required\r\n                                defaultValue={this.state.Date}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ผู้ส่ง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"ffrom\"\r\n                                id=\"ffrom\"\r\n                                required\r\n                                defaultValue={this.state.ffrom}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ถึง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"to\"\r\n                                id=\"to\"\r\n                                required\r\n                                defaultValue={this.state.to}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n                        <Button className=\"btn btn-lg btn-block  btn-success\">\r\n                            ยืนยัน\r\n                        </Button>\r\n                    </Form>   \r\n                </div>  \r\n           </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Upload; */","map":{"version":3,"sources":["C:/Users/false/Desktop/OCR-FullProject/client/src/pages/upload/Upload.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/* import React, { Component } from 'react';\r\nimport FileBase64 from 'react-file-base64';\r\nimport {Button,Form,FormGroup,Label,FormText,Input} from \"reactstrap\";\r\nimport \"./upload.css\";\r\n//import { convertPdfToPng } from 'convert-pdf-png';\r\n\r\n\r\n\r\n\r\n\r\nclass Upload extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n    \r\n    this.state = {\r\n            confirmation : \"\",\r\n            isLoading : \"\",\r\n            files : \"\",\r\n            Subject : \"\",  //ชื่อเรื่องเอกสาร\r\n            Num : \"\",   //เลขเอกสาร\r\n            Date: \"\", //วันที่\r\n            ffrom: \"\", //จาก\r\n            to: \"\", //ถึง\r\n            Vendor : \"\",\r\n            Description : \"\"\r\n      }\r\n\r\n    this.handleChane= this.handleChane.bind(this);\r\n    \r\n    }\r\n\r\n\r\n    handleChane(event){\r\n        event.preventDefault();\r\n        const target = event.target;\r\n        const value=target.value;\r\n        const name=target.name;\r\n\r\n        this.setState({name:value});\r\n\r\n    }\r\n\r\n    async handleSubmit(event){\r\n        event.preventDefaulr();\r\n        this.setState({confirmation : \"Uploading...\"});\r\n\r\n    }\r\n\r\n    async getFiles(files){\r\n        this.setState({\r\n            isLoading : \"Extracting data\",\r\n             files : files,\r\n             \r\n             \r\n             \r\n    }\r\n    \r\n    \r\n    );\r\n\r\n\r\n    const UID= Math.round(1+ Math.random() * (1000000-1));\r\n\r\n    var date={\r\n        fileExt:\"png\",\r\n        imageID: UID,\r\n        folder:UID,\r\n        img : this.state.files[0].base64\r\n    };\r\n\r\n    this.setState({confirmation : \"Processing...\"})\r\n    await fetch(\r\n        'https://k46tk0kz6j.execute-api.ap-southeast-1.amazonaws.com/Production',\r\n        {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n        body : JSON.stringify(date)\r\n        }\r\n    );\r\n\r\n\r\n\r\n\r\n    let targetImage= UID + \".png\";\r\n    const response=await fetch(\r\n        'http://localhost:8989/lambda_handler/<event>',\r\n        {\r\n    \r\n        method: \"POST\",\r\n        headers: {\r\n            Accept : \"application/json\",\r\n            \"Content-Type\": \"application.json\"\r\n        },\r\n    \r\n        body : JSON.stringify(targetImage)\r\n       \r\n        }\r\n       \r\n    );\r\n    this.setState({confirmation : \"\"})\r\n\r\n    const OCRBody = await response.json();\r\n    console.log(\"OCRBody\",OCRBody);\r\n\r\n    this.setState({Num :OCRBody.body[0] })\r\n    this.setState({Subject :OCRBody.body[1] })\r\n    this.setState({Date :OCRBody.body[2] })\r\n    this.setState({ffrom :OCRBody.body[3] })\r\n    this.setState({to :OCRBody.body[4] })\r\n\r\n\r\n    }\r\n\r\n    render() { \r\n        const processing=this.state.confirmation;\r\n        return ( \r\n           <div className=\"row\">\r\n               <div className=\"col-6 offset-3\">\r\n                    <Form onSubmit={this.handleSubmit} >\r\n                        <FormGroup>\r\n                           <h3 className=\"text-danger\">{processing}</h3>    \r\n                           <h6>Upload File</h6>\r\n                           <FormText color=\"muted\">PNG,JPG</FormText>\r\n                       \r\n                       \r\n                        <div className=\"form-group files color\">\r\n                            <FileBase64 \r\n                            multiple={true} \r\n                            onDone={this.getFiles.bind(this)}></FileBase64>\r\n\r\n                        </div>\r\n                        </FormGroup>  \r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>เลขที่หนังสือ</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Num\"\r\n                                id=\"Num\"\r\n                                required\r\n                                defaultValue={this.state.Num}\r\n                                onChange={this.handleChane}\r\n                            />\r\n\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ชื่อเรื่อง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Subject\"\r\n                                id=\"Subject\"\r\n                                required\r\n                                defaultValue={this.state.Subject}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>วันที่</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"Date\"\r\n                                id=\"Date\"\r\n                                required\r\n                                defaultValue={this.state.Date}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ผู้ส่ง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"ffrom\"\r\n                                id=\"ffrom\"\r\n                                required\r\n                                defaultValue={this.state.ffrom}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n\r\n                        <FormGroup>\r\n                            <Label>\r\n                                <h6>ถึง</h6>\r\n                            </Label>\r\n                            <Input \r\n                                type=\"text\"\r\n                                name=\"to\"\r\n                                id=\"to\"\r\n                                required\r\n                                defaultValue={this.state.to}\r\n                                onChange={this.handleChane}\r\n                            />\r\n                        </FormGroup>\r\n                        <Button className=\"btn btn-lg btn-block  btn-success\">\r\n                            ยืนยัน\r\n                        </Button>\r\n                    </Form>   \r\n                </div>  \r\n           </div>\r\n         );\r\n    }\r\n}\r\n \r\nexport default Upload; */"]},"metadata":{},"sourceType":"module"}